# 第7章 系统架构设计基础知识

- **7.1 软件架构 (SA) 概念**
  - **7.1.1 定义**
    - **核心**：构件 (Components)、连接件 (Connectors)、约束 (Constraints)
    - **本质**：设计蓝图，抽象表示 (非可运行软件)
    - **设计层次**：数据设计 (类/属性)、体系结构设计 (结构/交互)
  - **7.1.2 生命周期**
    - **需求分析**：问题空间 -> 解空间，可追踪性
    - **设计阶段 (核心)**
      - **SA描述**：构件、连接件、配置
      - **ADL (描述语言)**：UniCon, Wright, C2, xADL等
      - **多视图**：4+1视图 (逻辑/开发/进程/物理 + 场景)
    - **实现阶段**：组织结构，配置管理，代码生成
    - **构件组装**：消除失配 (Mismatch)——构件失配、连接子失配、全局假设失配
    - **部署阶段**：软硬件映射，质量分析
    - **后开发阶段**
      - **动态SA**：运行时演化 (内部执行/外部重配)
      - **SA重建**：从遗留系统恢复 (手工/工具/挖掘)
  - **7.1.3 重要性**
    - 沟通 (Stakeholders)，早期决策 (最早的决策)，复用 (抽象级)，管理复杂性

- **7.2 基于架构的开发方法 (ABSD)**
  - **7.2.1 概述**
    - **驱动力**：体系结构驱动 (商业/质量/功能需求)
    - **特点**：递归，迭代，与需求并行 (甚至早于需求完成)
    - **基础**：功能分解，选择风格，使用模板
  - **7.2.2 核心概念**
    - **设计元素**：系统 -> 子系统 -> 构件 (细化)
    - **视角与视图**：静态 (结构)，动态 (行为)
    - **用例与场景**：捕获功能 (用例) 和 质量 (质量场景：预期/非预期)
  - **7.2.3 开发过程 (6步迭代)**
    - **1. 体系结构需求**
      - 获取 (质量/商业目标)，标识构件 (类图->分组->打包)，评审
    - **2. 体系结构设计**
      - 提出模型 (风格)，映射构件，分析交互，产生架构，评审
    - **3. 文档化**：规格说明书，质量设计说明书
    - **4. 复审 (Review)**：识别风险 (外部人员参与)
    - **5. 实现**：构件实现，组装，测试
    - **6. 演化**：需求变化 -> 归类 -> 计划 -> 修改/增加/删除构件 -> 更新交互 -> 组装测试 -> 评审

- **7.3 软件架构风格 (重点)**
  - **7.3.1 概述**：词汇表 + 约束
  - **7.3.2 数据流风格**
    - **批处理序列**：一步一步，全量传递 (传统)
    - **管道-过滤器 (Pipe-Filter)**：流式，独立处理，递增 (Unix Shell, 编译器)
  - **7.3.3 调用/返回风格**
    - **主程序/子程序**：层次调用，单线程
    - **面向对象 (OO)**：封装，对象交互
    - **层次结构 (Layered)**：分层，每层服务于上层 (OS, 网络协议)
    - **客户端/服务器 (C/S)**：2层 (胖客)，3层 (应用服务器)
  - **7.3.4 以数据为中心**
    - **仓库 (Repository)**：中央数据 + 独立构件 (DB应用, IDE)
    - **黑板 (Blackboard)**：知识源 + 黑板 + 控制 (语音识别, 专家系统, 非结构化复杂问题)
  - **7.3.5 虚拟机风格**
    - **解释器 (Interpreter)**：仿真硬件，执行自定义语言 (脚本, 规则引擎)
    - **规则系统**：知识库 + 推理机 (AI)
  - **7.3.6 独立构件风格**
    - **进程通信**：消息传递 (分布式)
    - **事件系统 (隐式调用)**：广播/订阅，松耦合 (GUI, 调试器)

- **7.4 软件架构复用**
  - **复用类型**：机会复用 (发现即用)，系统复用 (预先规划/产品线)
  - **产品线 (SPL)**：共享核心资产 (Core Assets)，特定市场，规范化
  - **复用对象**：需求，架构，设计，代码，测试，过程，人员等
  - **过程**：构造/获取 -> 管理 (构件库/分类/检索) -> 使用 (定制/组装)

- **7.5 特定领域软件架构 (DSSA)**
  - **7.5.1 定义**
    - **特征**：领域模型，参考需求，参考架构，支持应用生成
    - **垂直域** (特定族) vs **水平域** (跨族通用功能)
  - **7.5.2 基本活动**
    - **领域分析**：建立领域模型 (需求)
    - **领域设计**：获得 DSSA (特定架构)
    - **领域实现**：开发可重用信息 (构件/基础设施)
  - **7.5.3 参与人员**
    - **领域专家** (提供知识)，**领域分析师** (获取/组织知识)，**领域设计师** (设计架构)，**领域实现人员**
  - **7.5.4 建立过程 (5阶段)**
    - 1. 定义领域范围
    - 2. 定义领域元素 (字典)
    - 3. 定义约束 (设计/实现)
    - 4. 定义领域模型和架构
    - 5. 产生/搜集可重用产品单元
