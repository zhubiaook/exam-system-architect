# 第17章 通信系统架构设计理论与实践

- **17.1 通信系统概述**
    - **演进**: 接入方式 (Dial-up -> Optical/5G), 速率 (GE -> 400GE), 结构 (总线 -> 异构多层), 形态 (物理 -> 虚拟化/服务化)
    - **作用**: 信息交互便利，数字化时代支撑
- **17.2 通信系统网络架构**
    - **17.2.1 局域网 (LAN) 网络架构**
        - **概述**: 小范围 (园区/建筑), 高速率, 低误码, 专用性
        - **组成**: 计算机, 交换机, 路由器
        - **典型架构风格**:
            - **单核心架构**: 单台核心交换机 + 接入交换机; 简单低成本，但有单点故障，扩展受限
            - **双核心架构**: 两台核心交换机 (网关保护/负载均衡); 可靠性高，支持热切换，成本较高
            - **环型架构**: 多台核心设备组成 RPR 环; 自愈保护 (<50ms), 节省光纤，但冗余设计复杂
            - **层次局域网架构**: 核心层 (高速转发) + 汇聚层 (策略/控制) + 接入层 (用户接入); 易扩展，易维护
    - **17.2.2 广域网 (WAN) 网络架构**
        - **概述**: 广阔区域互联，通信子网 + 资源子网
        - **架构类型**:
            - **单核心广域网**: 一台核心路由设备; 简单，单点故障风险
            - **双核心广域网**: 两台核心路由设备; 冗余可靠，负载均衡
            - **环型广域网**: 三台以上路由设备成环; 多路径，高可靠，实施难度大
            - **半冗余广域网**: 网状结构，核心设备至少两条链路; 灵活扩展，适合OSPF，管理较难
            - **对等子域广域网**: 两个独立子域，半冗余互连; 路由控制灵活，适合双区域场景
            - **层次子域广域网**: 多个子域分层; 扩展性好，高层连接低层
    - **17.2.3 移动通信网网络架构 (5G)**
        - **5GS与DN互连**:
            - **接口**: N6 (UPF与DN之间)
            - **主要网元**: UE, UPF, DN, SMF
            - **接入模式**:
                - **透明模式**: IP地址由运营商分配，5GS提供基本管道，无需DN-AAA认证
                - **非透明模式**: IP地址由ISP/Intranet分配，通过VPN/隧道接入，需DN-AAA互信认证
        - **边缘计算 (MEC)**:
            - **架构**: UPF下沉至边缘 + MEP (移动边缘平台)
            - **优势**: 降低时延，减轻回传压力，提升QoE
            - **业务连续性**: SSC模式1/2/3
    - **17.2.4 存储网络架构**
        - **直连式存储 (DAS)**: I/O总线直接连接，适合小规模
        - **网络连接存储 (NAS)**:
            - 基于IP网络，文件级访问 (RPC)
            - **协议**: CIFS/SMB (Windows), NFS (Unix/Linux)
            - **特点**: 易用，易管理，低成本
        - **存储区域网络 (SAN)**:
            - 专用高速网络，块级访问
            - **类型**: FC-SAN (光纤通道), IP-SAN (iSCSI)
            - **协议**: FCP (主流), iSCSI (IP封装), FCoE (以太网封装FC), FC-NVMe (PCIe over FC)
            - **特点**: 高性能，低延迟，高可用，适合关键业务
    - **17.2.5 软件定义网络架构 (SDN)**
        - **核心思想**: 控制面与数据面分离，控制集中化，接口开放化
        - **架构分层**:
            - **数据平面**: 转发设备 (白盒/轻量)，基于流表转发
            - **控制平面**: SDN控制器 (逻辑中心)，掌握全局视图
            - **应用平面**: 各种网络应用 (流量工程, 安全等)
        - **接口**:
            - **南向接口 (SBI)**: 控制器-转发设备 (如 OpenFlow)
            - **北向接口 (NBI)**: 控制器-应用 (开放API)
            - **东西向接口**: 控制器之间 (扩展性)
- **17.3 网络构建关键技术**
    - **17.3.1 网络高可用设计**
        - **可用性 (A)**: A = MTBF / (MTBF + MTTR)
        - **提升途径**: 提高 MTBF (设备质量), 降低 MTTR (快速发现/恢复)
        - **连接模型**: 一对一, 一对二, 二对一, 双点双归 (双一对一), 双归属 (双一对二 - 最高可用性)
        - **协议**: OSPF/BGP(路由), BFD/NQA(检测), VRRP/HSRP(网关), 802.3ad(链路聚合)
    - **17.3.2 IPv4与IPv6融合组网技术**
        - **双协议栈**: 节点同时支持 IPv4/IPv6，适应性强，互通基础
        - **隧道技术**:
            - **ISATAP**: IPv4中嵌入IPv6，自动隧道，站内/主机间
            - **6to4**: 2002前缀，跨IPv4网络连接IPv6孤岛
            - **4over6**: IPv6骨干网承载IPv4业务
            - **6over4**: 借助IPv4多播网络传送IPv6
        - **地址翻译 (NAT-PT)**: 解决纯IPv4与纯IPv6互通，协议转换
    - **17.3.3 SDN技术**
        - **控制平面技术**: 
            - 集中式扩展 (多线程NOX-MT, 多核Maestro)
            - 多控制器扩展 (扁平模型, 层次模型)
        - **数据平面技术**:
            - 硬件: RMT模型 (可重构匹配表), FlowAdapter
            - 软件: CPU/NP处理，灵活性高但速度慢
        - **一致性更新**: “两段提交” (等待旧流结束), “增量一致性” (分批更新)
- **17.4 网络构建和设计方法**
    - **17.4.1 网络需求分析**
        - **业务需求**: 投资规模, 业务增长, 可靠性指标
        - **用户需求**: 访谈, 问卷, 识别真实痛点
        - **应用需求**: 响应时间, 流量特征, 数据类型
        - **计算机平台需求**: 接入设备类型
        - **网络需求**: 拓扑, 性能, 管理, 安全
    - **17.4.2 网络技术遴选及设计**
        - **局域网**: STP (防环), VLAN (隔离/广播域), WLAN (覆盖/冗余), 链路聚合, 服务器负载均衡 (LB/DNS/NAT/集群)
        - **广域网**: 接入技术 (PON/DSL/5G), 互连技术 (MPLS VPN/MSTP), 性能优化
        - **地址规划**: 层次化, 中心授权, 动态分配 (DHCP), 私有地址+NAT
    - **17.4.3 网络安全**
        - **威胁**: 病毒, 木马, DDoS, 僵尸网络
        - **技术**:
            - **防火墙**: 包过滤, 代理, 状态检测; 区域隔离
            - **VPN**: IPSec, MPLS VPN; 加密通道
            - **访问控制**: 认证, 授权, 审计; DAC/MAC/RBAC
            - **隔离**: 物理, 逻辑 (VLAN)
            - **协议**: SSL/TLS, HTTPS (加密Web), SET (电子交易)
            - **审计**: 记录与分析, 追踪溯源
    - **17.4.4 绿色网络设计**
        - **原则**:
            - **标准化**: 减少转换设备，异构兼容
            - **集成化**: 减少设备数量，多功能集成
            - **虚拟化**: 资源按需分配，提高利用率
            - **智能化**: 自动休眠，智能管理，减少人力
- **17.5 通信网络构建案例分析**
    - **17.5.1 高可用网络构建**
        - **接入层模型**:
            - 倒U型 (无环, 无冗余)
            - U型 (无环, 链路冗余)
            - 矩形 (有环, STP, 冗余度高)
            - **三角形** (有环, MSTP+VRRP, 最佳可用性)
        - **汇聚层**: 部署 FW/LB 双机热备，OSPF 路由收敛
        - **性能指标**: 核心故障恢复 <500ms, 链路聚合恢复 <1s
    - **17.5.2 园区网双栈构建**
        - **骨干网**: 核心/汇聚开启双栈，IGP运行v4/v6
        - **接入策略**: 双栈接入，或隧道接入 (ISATAP)
    - **17.5.3 5G网络应用**
        - **智能电网**: 
            - 场景: 输变电监控, 配网自动化, 综合能源
            - 技术: uRLLC (低时延切片) + MEC (边缘计算) 满足 <8ms 跳闸保护需求
